WACallback subclass: #JSAjaxCallback	instanceVariableNames: 'block'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSAjaxCallback class	instanceVariableNames: ''!WATableBasedEncoder subclass: #JSJavascriptStringEncoder	instanceVariableNames: 'buffer offset'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptStringEncoder class	instanceVariableNames: ''!WAObject subclass: #JSArgument	instanceVariableNames: 'argument'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSArgument class	instanceVariableNames: ''!WACallback subclass: #JSPassenger	instanceVariableNames: 'object'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSPassenger class	instanceVariableNames: ''!WAObject subclass: #JSArguments	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSArguments class	instanceVariableNames: ''!WADocument subclass: #JSJavascriptDocument	instanceVariableNames: 'urlEncoder javascriptStringEncoder'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptDocument class	instanceVariableNames: ''!WAObject subclass: #JSCode	instanceVariableNames: 'code'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSCode class	instanceVariableNames: ''!WACanvas subclass: #JSJavascriptCanvas	instanceVariableNames: 'first'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptCanvas class	instanceVariableNames: ''!WAObject subclass: #JSObject	instanceVariableNames: 'decoration renderContext rendererClass'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSObject class	instanceVariableNames: ''!JSObject subclass: #JSJoin	instanceVariableNames: 'collection'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJoin class	instanceVariableNames: ''!JSObject subclass: #JSJson	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJson class	instanceVariableNames: ''!JSObject subclass: #JSStream	instanceVariableNames: 'fragments'	classVariableNames: 'Arguments This'	package: 'Javascript-Core-Base'!JSStream class	instanceVariableNames: ''!JSObject subclass: #JSLogger	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Base'!JSLogger class	instanceVariableNames: ''!JSObject subclass: #JSString	instanceVariableNames: 'renderable'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSString class	instanceVariableNames: ''!WABrush subclass: #JSJavascriptBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptFunctionArgumentBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptFunctionArgumentBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavasciptObjectBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavasciptObjectBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptOperatorBrush	instanceVariableNames: 'operator'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptOperatorBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptElementBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptElementBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptFunctionArgumentsBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptFunctionArgumentsBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptArrayBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptArrayBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptReturnBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptReturnBrush class	instanceVariableNames: ''!JSJavascriptElementBrush subclass: #JSJavascriptKeyValueBrush	instanceVariableNames: 'key'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptKeyValueBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptFunctionCallBrush	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptFunctionCallBrush class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptAssignmentBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptAssignmentBrush class	instanceVariableNames: ''!JSJavascriptElementBrush subclass: #JSJavascriptValueBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptValueBrush class	instanceVariableNames: ''!JSObject subclass: #JSScript	instanceVariableNames: 'statements'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSScript class	instanceVariableNames: ''!JSScript subclass: #JSFunction	instanceVariableNames: 'return arguments'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSFunction class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptFunctionDefinitionBrush	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptFunctionDefinitionBrush class	instanceVariableNames: ''!WAObject subclass: #JSDecoration	instanceVariableNames: 'owner'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSDecoration class	instanceVariableNames: ''!JSDecoration subclass: #JSCreate	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCreate class	instanceVariableNames: ''!JSDecoration subclass: #JSApply	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSApply class	instanceVariableNames: ''!JSDecoration subclass: #JSNegation	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSNegation class	instanceVariableNames: ''!JSDecoration subclass: #JSIfThenElse	instanceVariableNames: 'trueStatement falseStatement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSIfThenElse class	instanceVariableNames: ''!JSDecoration subclass: #JSAssignment	instanceVariableNames: 'object'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssignment class	instanceVariableNames: ''!JSDecoration subclass: #JSStatement	instanceVariableNames: 'statement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSStatement class	instanceVariableNames: ''!JSStatement subclass: #JSConcatenation	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSConcatenation class	instanceVariableNames: ''!JSStatement subclass: #JSCondition	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCondition class	instanceVariableNames: ''!JSDecoration subclass: #JSMember	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSMember class	instanceVariableNames: ''!JSMember subclass: #JSProperty	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSProperty class	instanceVariableNames: ''!JSMember subclass: #JSAlias	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAlias class	instanceVariableNames: ''!JSMember subclass: #JSAssign	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssign class	instanceVariableNames: ''!JSCondition subclass: #JSConditionElse	instanceVariableNames: 'elseStatement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSConditionElse class	instanceVariableNames: ''!JSAssign subclass: #JSAssignLocal	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssignLocal class	instanceVariableNames: ''!JSDecoration subclass: #JSCall	instanceVariableNames: 'name arguments'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCall class	instanceVariableNames: ''!JSStatement subclass: #JSBinary	instanceVariableNames: 'operator'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSBinary class	instanceVariableNames: ''!JSMember subclass: #JSAccess	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAccess class	instanceVariableNames: ''!JSDecoration subclass: #JSTimed	instanceVariableNames: 'duration'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSTimed class	instanceVariableNames: ''!JSTimed subclass: #JSInterval	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSInterval class	instanceVariableNames: ''!JSTimed subclass: #JSTimeout	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSTimeout class	instanceVariableNames: ''!JSJavascriptBrush subclass: #JSJavascriptConstructorCallBrush	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptConstructorCallBrush class	instanceVariableNames: ''!WACallback subclass: #JSAjaxCallback	instanceVariableNames: 'block'	classVariableNames: ''	package: 'Javascript-Core-Base'!!JSAjaxCallback methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!block: aZeroOrOneArgBlock	block := aZeroOrOneArgBlock! !!JSAjaxCallback methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!priority	^ 5! !!JSAjaxCallback methodsFor: 'evaluation' stamp: '1/8/2026 11:26:12'!evaluateWithArgument: anObject	block isNil		ifFalse: [ block valueWithPossibleArguments: (Array with: anObject) ].	self requestContext		respond: [ :response | response doNotCache ]! !WATableBasedEncoder subclass: #JSJavascriptStringEncoder	instanceVariableNames: 'buffer offset'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptStringEncoder comment: 'I am an encoder for strings in Javascript nested in html documents.'!!JSJavascriptStringEncoder methodsFor: 'private' stamp: '1/8/2026 11:26:12'!bufferCharacter: aCharacter	buffer at: offset put: aCharacter.	offset := offset + 1.! !!JSJavascriptStringEncoder methodsFor: 'private' stamp: '1/8/2026 11:26:12'!bufferIsEmpty	^ offset = 1! !!JSJavascriptStringEncoder methodsFor: 'private - encoding' stamp: '1/8/2026 11:26:12'!encodeNonAsciiCharacter: aCharacter withCodePoint: anInteger	"U+2028 and U+2029 have to be treated as new lines"	anInteger = 16r2028 "Line separator"		ifTrue: [ stream nextPutAll: '\u2028' ]		ifFalse: [			anInteger = 16r2029 "Paragraph separator"				ifTrue: [ stream nextPutAll: '\u2029' ]				ifFalse: [ stream nextPut: aCharacter ] ]! !!JSJavascriptStringEncoder methodsFor: 'private - encoding' stamp: '1/8/2026 11:26:12'!flushBuffer	self bufferIsEmpty ifTrue: [ ^ self ].	buffer doWithIndex:[:char :index | 		index = offset ifTrue:[ offset := 1. ^ self ].		self privateNextPut: char ].	offset := 1.! !!JSJavascriptStringEncoder methodsFor: 'private - encoding' stamp: '1/8/2026 11:26:12'!flushBufferWhenNeeded	"Writes the contents of the buffer to the stream when it can be decided that encoding the $< as \x3C should happen or not."	| contentsOfBuffer |	contentsOfBuffer := String withAll: (buffer copyFrom: 1 to: offset - 1).	(#('<!!--' '<script' '</script') anySatisfy: [ :toBeEncoded | toBeEncoded greaseBeginsWith: contentsOfBuffer ])		ifTrue:[			"Encode the $< and flush the buffer to the stream if we have written one of the given character sequences completely.			Otherwise, continue buffering."			(#('<!!--' '<script' '</script') detect: [ :toBeEncoded | toBeEncoded = contentsOfBuffer ] ifNone: [ nil ])				isNil ifFalse:[					stream nextPutAll: '\x3C'.					stream greaseNext: contentsOfBuffer size - 1 putAll: contentsOfBuffer startingAt: 2.					offset := 1 ].			^ self ].	"We are not buffering any of the given character sequences, so flush the buffer to the stream and apply regular encoding."	self flushBuffer! !!JSJavascriptStringEncoder methodsFor: 'private - encoding' stamp: '1/8/2026 11:26:12'!privateNextPut: aCharacter	| value index encoded |		value := aCharacter greaseInteger.	index := value + 1.	index > table size ifTrue: [		^ self encodeNonAsciiCharacter: aCharacter withCodePoint: value ].	encoded := table at: index.	"Issue 482: use #notNil because it is faster than #isString because it is not actually sent"	encoded notNil		ifTrue: [ stream nextPutAll: encoded ]		ifFalse: [ stream nextPut: aCharacter ]! !!JSJavascriptStringEncoder methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	super initialize.	buffer := Array new: 8.	offset := 1! !!JSJavascriptStringEncoder methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!nextPut: aCharacter	"Encoding for $< in Javascript strings. See https://html.spec.whatwg.org/multipage/scripting.html#restrictions-for-contents-of-script-elements"	(aCharacter = $< and:[ self bufferIsEmpty ]) ifTrue:[		"We encountered a $<, start buffering the characters."		^ self bufferCharacter: aCharacter ].	self bufferIsEmpty ifFalse:[		"We are currently buffering characters (starting with a $<); check if we can flush the buffer and encode it if necesary."		self bufferCharacter: aCharacter.		^ self flushBufferWhenNeeded ].		self privateNextPut: aCharacter! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptStringEncoder class	instanceVariableNames: ''!JSJavascriptStringEncoder class comment: 'I am an encoder for strings in Javascript nested in html documents.'!!JSJavascriptStringEncoder class methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	self initializeTable! !!JSJavascriptStringEncoder class methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeTable	| printer escapes |	printer := GRNumberPrinter new.	printer base: 16; padding: $0; digits: 2.	table := Array new: self maximumCharacterValue + 1.	"write control characters"	0 to: 31 do: [ :index | 		table 			at: index + 1			put: '\x', (printer print: index) ].	"overwrite named (control) characters"	escapes := #(0 '\0' 8 '\b' 9 '\t' 10 '\n' 12 '\f' 13 '\r' 34 '\"' 92 '\\' ).	1 to: escapes size - 1 by: 2 do: [ :index | 		table 			at: (escapes at: index) + 1			put: (escapes at: index + 1) ]! !!JSJavascriptStringEncoder class methodsFor: 'private' stamp: '1/8/2026 11:26:12'!maximumCharacterValue	"Everything higher is safe."		^ 16r7F! !WAObject subclass: #JSArgument	instanceVariableNames: 'argument'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSArgument comment: 'I am a special case of JSArguments with only a singular argument. I am a performance optimization to avoid an array allocation.'!!JSArgument methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWith: anObject	self initialize.	argument := anObject! !!JSArgument methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer arguments: [ 		aRenderer argument: argument ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSArgument class	instanceVariableNames: ''!JSArgument class comment: 'I am a special case of JSArguments with only a singular argument. I am a performance optimization to avoid an array allocation.'!!JSArgument class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!with: anObject	^ self basicNew		initializeWith: anObject! !WACallback subclass: #JSPassenger	instanceVariableNames: 'object'	classVariableNames: ''	package: 'Javascript-Core-Base'!!JSPassenger methodsFor: 'evaluation' stamp: '1/8/2026 11:26:12'!evaluateWithArgument: anObject	self shouldNotImplement! !!JSPassenger methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isEnabledFor: aRequestContext	^ false! !!JSPassenger methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isPassenger	^ true! !!JSPassenger methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!object	^ object! !!JSPassenger methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!setObject: anObject	object := anObject! !WAObject subclass: #JSArguments	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSArguments comment: 'I am a collection of Javascript function arguments.'!!JSArguments methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithAll: aCollection	self initialize.	arguments := aCollection! !!JSArguments methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer arguments: [		arguments do: [ :each | 			aRenderer argument: each ] ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSArguments class	instanceVariableNames: ''!JSArguments class comment: 'I am a collection of Javascript function arguments.'!!JSArguments class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!withAll: aCollection	^ self basicNew		initializeWithAll: aCollection! !WADocument subclass: #JSJavascriptDocument	instanceVariableNames: 'urlEncoder javascriptStringEncoder'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptDocument comment: 'I add the possibility to generate Javascript.'!!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!assignment	stream nextPut: $=! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!beginString	stream nextPut: $"! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!closeArray	stream nextPut: $]! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!closeBlock	stream nextPut: $}! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!closeBracket	stream nextPut: $]! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!closeObject	stream nextPut: $}! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!dotProperty: aString	stream nextPut: $..	self identifier: aString! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!encodeURIComponent	stream nextPutAll: 'encodeURIComponent'! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!endString	stream nextPut: $"! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!identifier: aString	stream nextPutAll: aString! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!infinity	stream nextPutAll: 'Infinity'! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!jscode: aCodeString	"write given Javascript code verbatim"	stream nextPutAll: aCodeString! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!keyword: aString	stream nextPutAll: aString.	stream nextPut: Character space! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!nan	stream nextPutAll: 'NaN'! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!negation	stream nextPut: $!!! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!negativeInfinity	stream nextPutAll: '-Infinity'! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!null	stream nextPutAll: 'null'! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!openArray	stream nextPut: $[! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!openBlock	stream nextPut: ${! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!openBracket	stream nextPut: $[! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!openObject	stream nextPut: ${! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!operator: aString	stream nextPutAll: aString! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!separator	stream nextPut: $;! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!string: aString	stream nextPut: $".	javascriptStringEncoder nextPutAll: aString; flushBuffer.	stream nextPut: $"! !!JSJavascriptDocument methodsFor: 'writing' stamp: '1/8/2026 11:26:12'!urlEncode: aString	urlEncoder nextPutAll: aString! !!JSJavascriptDocument methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithStream: aStream codec: aCodec	super initializeWithStream: aStream codec: aCodec.	javascriptStringEncoder := GRPlatform current javascriptStringEncoderOn: aStream.	urlEncoder := GRPlatform current urlEncoderOn: aStream codec: aCodec.! !WAObject subclass: #JSCode	instanceVariableNames: 'code'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSCode comment: 'I am unescaped Javascript code that is rendered verbatim.'!!JSCode methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeOn: aString	self initialize.	code := aString! !!JSCode methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer javascript: code! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSCode class	instanceVariableNames: ''!JSCode class comment: 'I am unescaped Javascript code that is rendered verbatim.'!!JSCode class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!on: aString	^ self basicNew initializeOn: aString! !WACanvas subclass: #JSJavascriptCanvas	instanceVariableNames: 'first'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJavascriptCanvas comment: 'I am a  specific canvas to render JSON output.'!!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!argument: aBlock	^ (self brush: JSJavascriptFunctionArgumentBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!arguments: aBlock	^ (self brush: JSJavascriptFunctionArgumentsBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!array: aBlock	^ (self brush: JSJavascriptArrayBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!assignment: aBlock	^ (self brush: JSJavascriptAssignmentBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!bracketProperty: aStringOrInteger	self document openBracket.	self render: aStringOrInteger.	self document closeBracket! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!defineFunction	^ self brush: (JSJavascriptFunctionDefinitionBrush new)! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!defineFunction: aBlock	^ (self brush: (JSJavascriptFunctionDefinitionBrush new)) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!encodeURIComponent: anObject	self document encodeURIComponent.	self document nextPut: $(.	self render: anObject.	self document nextPut: $)! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!function: aFunctionNameString	^ self brush: (JSJavascriptFunctionCallBrush name: aFunctionNameString)! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!javascript: aString	self document jscode: aString! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!key: aKeyString value: aValueObject	^ (self brush: (JSJavascriptKeyValueBrush key: aKeyString)) with: aValueObject! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!new: aString	^ self brush: (JSJavascriptConstructorCallBrush name: aString)! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!nextPut: aCharacter 	self document nextPut: aCharacter! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!object: aBlock	^ (self brush: JSJavasciptObjectBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!operator: aString 	^ self brush: (JSJavascriptOperatorBrush operator: aString)! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!render: anObject	self flush.	anObject javascriptOn: self! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!return: aBlock	^ (self brush: JSJavascriptReturnBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'public' stamp: '1/8/2026 11:26:12'!value: aBlock	^ (self brush: JSJavascriptValueBrush new) with: aBlock! !!JSJavascriptCanvas methodsFor: 'double-dispatch' stamp: '1/8/2026 11:26:12'!boolean: aBoolean	self document nextPutAll: (aBoolean ifTrue: [ 'true' ] ifFalse: [ 'false' ])! !!JSJavascriptCanvas methodsFor: 'double-dispatch' stamp: '1/8/2026 11:26:12'!null	self document nextPutAll: 'null'! !!JSJavascriptCanvas methodsFor: 'double-dispatch' stamp: '1/8/2026 11:26:12'!number: aNumber	aNumber printOn: self document stream! !!JSJavascriptCanvas methodsFor: 'double-dispatch' stamp: '1/8/2026 11:26:12'!scaledDecimal: aScaledDecimal	| converter |	converter := GRSignPrinter new, (GRNumberPrinter new precision: aScaledDecimal scale).	converter print: aScaledDecimal on: self document stream! !!JSJavascriptCanvas methodsFor: 'double-dispatch' stamp: '1/8/2026 11:26:12'!string: aString	self document string: aString! !!JSJavascriptCanvas methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithContext: aRenderContext	super initializeWithContext: aRenderContext.	first := true! !!JSJavascriptCanvas methodsFor: 'private' stamp: '1/8/2026 11:26:12'!nest: aBlock	first := true.	super nest: aBlock.	first := false! !!JSJavascriptCanvas methodsFor: 'private' stamp: '1/8/2026 11:26:12'!writeCharacterIfNotFirst: aCharacter	first ifFalse: [		self document nextPut: aCharacter ]! !!JSJavascriptCanvas methodsFor: 'private' stamp: '1/8/2026 11:26:12'!writeIfNotFirst: aString	first ifFalse: [		self document nextPutAll: aString ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptCanvas class	instanceVariableNames: ''!JSJavascriptCanvas class comment: 'I am a  specific canvas to render JSON output.'!!JSJavascriptCanvas class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!builder	^ (WABuilder on: self)		documentClass: JSJavascriptDocument;		yourself! !WAObject subclass: #JSObject	instanceVariableNames: 'decoration renderContext rendererClass'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSObject comment: 'I represent the abstract root of all JavaScript objects in the Smalltalk world. My subclasses provide accessors and action methods to configure instances of myself and implement the method #javascriptContentOn: to emit valid JavaScript code for my presentation.Instance Variables	decoration:			<JSObject|JSDecoration>	renderContext:		<WARenderContext>	rendererClass:		<WARenderer>'!!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!& anObject 	"Combine the receiver and anObject with a logical AND."		self addDecoration: (JSBinary new operator: '&&'; statement: anObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!access: aString 	"Access the member aString."		self addDecoration: (JSAccess named: aString)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!alias: aString 	"Uses aString as an alias for the receiver."		self addDecoration: (JSAlias named: aString)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!apply: aCollection 	"Apply aCollection of arguments."		self addDecoration: (JSApply new arguments: aCollection)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!assign: anObject 	"Assign anObject to the receiver."		self addDecoration: (JSAssignment new object: anObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!assignLocalTo: aString 	"Assign the receiver to a local variable aString."		self addDecoration: (JSAssignLocal named: aString)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!assignTo: aString 	"Assign the receiver to a global variable aString."		self addDecoration: (JSAssign named: aString)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!call: aString	"Call the method named aString."	self call: aString withArguments: #()! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!call: aString with: anObject	"Call the method named aString with anObject as its argument."	self call: aString withArguments: (Array with: anObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!call: aString with: anObject1 with: anObject2	"Call the method named aString with anObject1 and anObject2 as its arguments."	self call: aString withArguments: (Array with: anObject1 with: anObject2)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!call: aString with: anObject1 with: anObject2 with: anObject3	"Call the method named aString with anObject1 and anObject2 and anObject3 as its arguments."	self call: aString withArguments: (Array with: anObject1 with: anObject2 with: anObject3)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!call: aString withArguments: anArray	"Call the method named aString with anArray as arguments."	self addDecoration: (JSCall new 		name: aString;		arguments: anArray;		yourself)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!condition: anObject 	"Treat anObject as a condition to the execution of the receiver."		self addDecoration: (JSCondition on: anObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!condition: anObject  else: otherObject	"Treat anObject as a condition to the execution of the receiver."		self addDecoration: (JSConditionElse on: anObject else: otherObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!create	"Instantiate the receiver."		self addDecoration: JSCreate new! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!interval: aDuration	"Execute the receiver every aDuration."	self addDecoration: (JSInterval duration: aDuration)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!not	"Negate the receiver logically."		self addDecoration: JSNegation new! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!property: aString 	"Treat anObject as a condition to the execution of the receiver."		self addDecoration: (JSProperty named: aString)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!setTimeout: aDuration 	"Evaluates the receiver after aDuration."		self addDecoration: (JSTimeout duration: aDuration)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!then: anObject	"Evaluates anObject if the receiver treated as a boolean evaluates to true."	self then: anObject else: nil! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!then: anObject else: anotherObject 	"Evaluates anObject if the receiver treated as a boolean evaluates to true, otherwise evaluate anotherObject."		self addDecoration: (JSIfThenElse new		trueStatement: anObject;		falseStatement: anotherObject)! !!JSObject methodsFor: 'decorations' stamp: '1/8/2026 11:26:12'!| anObject 	"Combine the receiver and anObject with a logical OR."		self addDecoration: (JSBinary new operator: '||'; statement: anObject)! !!JSObject methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!, anObject 	"Concatenate the receiver with anObject."	self addDecoration: (JSConcatenation on: anObject)! !!JSObject methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!confirm: anObject 	"Show a confirmation with the message anObject before evaluating the receiver."		self condition: (JSStream new		nextPutAll: 'confirm';		argument: anObject)! !!JSObject methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!return: anObject 	"Return anObject after evaluating the receiver."		self , (JSStream new		nextPutAll: 'return ';		javascript: anObject)! !!JSObject methodsFor: 'adding' stamp: '1/8/2026 11:26:12'!addDecoration: aDecoration	"Add a new decoration to the receiver."	aDecoration setOwner: decoration.	decoration := aDecoration! !!JSObject methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!decoration	"Answer the top-level decoration in the receivers decoration stack."	^ decoration! !!JSObject methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!renderContext	"Answer the current WARenderContext."	^ renderContext! !!JSObject methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!rendererClass	"Answer the class that should be used when rendering objects."	^ rendererClass ifNil: [ rendererClass := WARenderer default ]! !!JSObject methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!rendererClass: aRendererClass	"Specify the class that should be used when rendering objects."	rendererClass := aRendererClass! !!JSObject methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!greaseString	^ self asJavascript! !!JSObject methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	"Generate the JavaScript string of the receiver. Override this method in subclasses to define custom JavaScript code. Note, if you run into this method, you likely use old Seaside code need to rename #printContentOn: to #javascriptContentOn:."		self subclassResponsibility! !!JSObject methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	"Generate the JavaScript code from the receiver by dispatching to the outermost surrounding decoration. Do not override this method, instead override #javascriptContentOn:."	self decoration javascriptContentOn: aRenderer! !!JSObject methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!printOn: aStream	super printOn: aStream.	aStream nextPutAll: ' ('.	JSJavascriptCanvas builder		render: self		on: aStream.	aStream nextPut: $)! !!JSObject methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	super initialize.	decoration := self! !!JSObject methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!setContext: aRenderContext	renderContext := aRenderContext! !!JSObject methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isJavascript	^ true! !!JSObject methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!jsStringWith: aRenderable	"Create a renderable that will render the string immediately on the response stream."	^ (JSString context: self renderContext) 			setRenderable: aRenderable;			yourself! !!JSObject methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!render: aRenderable	"Render aRenderable and answer the resulting string."		^ String streamContents: [ :stream | self render: aRenderable on: stream ]! !!JSObject methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!render: aRenderable on: aStream	"Render aRenderable on aStream."		| document |	document := (WAHtmlDocument		on: aStream		codec: self requestContext codec)		scriptGenerator: self requestContext handler scriptGeneratorClass new;		yourself.	self renderContext document: document during: [		(self rendererClass context: self renderContext)			render: aRenderable; flush ].	document scriptGenerator closeOn: document! !!JSObject methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!script: aBlock	"Evaluate aBlock and answer the string of the generated script."		^ String streamContents: [ :stream | self script: aBlock on: stream ]! !!JSObject methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!script: aBlock on: aStream	"Evaluate aBlock and pass in a script object that is subsequently written to aStream."	| script |	self flag: #TODO. "questionalble API, receiver is already JSScript"	script := (JSScript context: self renderContext)		rendererClass: self rendererClass;		yourself.	aBlock value: script.	JSJavascriptCanvas builder		actionUrl: self renderContext actionUrl;		resourceUrl: self renderContext resourceUrl;		render: script		on: aStream! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSObject class	instanceVariableNames: ''!JSObject class comment: 'I represent the abstract root of all JavaScript objects in the Smalltalk world. My subclasses provide accessors and action methods to configure instances of myself and implement the method #javascriptContentOn: to emit valid JavaScript code for my presentation.Instance Variables	decoration:			<JSObject|JSDecoration>	renderContext:		<WARenderContext>	rendererClass:		<WARenderer>'!!JSObject class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!context: aRenderContext	^ self new setContext: aRenderContext; yourself! !JSObject subclass: #JSJoin	instanceVariableNames: 'collection'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJoin comment: 'I join a collection of JavaScript statements with the given string.'!!JSJoin methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!collection	^ collection! !!JSJoin methodsFor: 'encoding' stamp: '1/8/2026 11:26:12'!encodeAssociation: anAssociation on: aRenderer	| key value |	"key -> nil: ""key""	 key -> aString: ""key=aString(urlEncoded)""	key -> anObject: ""key=""+encodeURIComponent(anObject)"	key := anAssociation key.	value := anAssociation value.	aRenderer document		beginString		urlEncode: key greaseString.	value isNil ifTrue: [		aRenderer document endString.		^ self ].		aRenderer document nextPut: $=.	(value isString or: [ value isCharacter ]) ifTrue: [		aRenderer document				urlEncode: value greaseString;				endString	.		^ self ].	aRenderer document		endString;		operator: '+'.	aRenderer encodeURIComponent: value! !!JSJoin methodsFor: 'encoding' stamp: '1/8/2026 11:26:12'!encodeElement: anObject on: aRenderer	(anObject isKindOf: Association)		ifTrue: [			self encodeAssociation: anObject on: aRenderer ]		ifFalse: [			"We assume that the element is already URL encoded if this is not an association."			aRenderer render: anObject ]! !!JSJoin methodsFor: 'encoding' stamp: '1/8/2026 11:26:12'!encodeEmptyOn: aRenderer	aRenderer string: ''! !!JSJoin methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeOn: aCollection	self initialize.	collection := aCollection! !!JSJoin methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	self collection isEmpty		ifTrue: [ ^ self encodeEmptyOn: aRenderer ].	self collection size = 1		ifTrue: [ ^ self encodeElement: self collection first on: aRenderer ].	aRenderer array: [		self collection do: [ :each |			aRenderer value: [				self encodeElement: each on: aRenderer ] ] ].	(aRenderer document dotProperty: 'join').	aRenderer arguments: [ 		aRenderer string: '&' ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJoin class	instanceVariableNames: ''!JSJoin class comment: 'I join a collection of JavaScript statements with the given string.'!!JSJoin class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!new	^ self on: OrderedCollection new! !!JSJoin class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!on: aCollection	^ self basicNew initializeOn: aCollection! !JSObject subclass: #JSJson	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Base'!JSJson comment: 'I represent the JSON object (www.json.org) that is supported by most modern web browsers. For older browsers I require WAJsonDeploymentLibrary or WAJsonDevelopmentLibrary to be included.'!!JSJson methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document identifier: 'JSON'! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!parse: aString	"This method parses a JSON text to produce an object or array."	self call: 'parse' with: aString! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!parse: aString reviver: aFunction 	"This method parses a JSON text to produce an object or array. The optional reviver parameter is a function that can filter and transform the results. It receives each of the keys and values, and its return value is used instead of the original value. If it returns what it received, then the structure is not modified. If it returns undefined then the member is deleted."	self call: 'parse' with: aString with: aFunction asFunction! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!stringify: anObject	"Serialize anObject as a JSON string."	self call: 'stringify' with: anObject! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!stringify: anObject replacer: aReplacer	"Serialize anObject as a JSON string. aReplacer is an optional parameter that determines how object values are stringified for objects. It can be a function or an array of strings."	self call: 'stringify' with: anObject with: aReplacer! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!stringify: anObject replacer: aReplacer space: aSpace	"Serialize anObject as a JSON string. aReplacer is an optional parameter that determines how object values are stringified for objects. It can be a function or an array of strings. aSpace is an optional parameter that specifies the indentation of nested structures. If it is omitted, the text will be packed without extra whitespace."	self call: 'stringify' with: anObject with: aReplacer with: aSpace! !!JSJson methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!stringify: anObject space: aSpace	"Serialize anObject as a JSON string. aSpace is an optional parameter that specifies the indentation of nested structures. If it is omitted, the text will be packed without extra whitespace."	self call: 'stringify' with: anObject with: aSpace! !JSObject subclass: #JSStream	instanceVariableNames: 'fragments'	classVariableNames: 'Arguments This'	package: 'Javascript-Core-Base'!JSStream comment: 'I represent a verbatim JavaScript string. I support streaming facilities to efficiently encode JavaScript input.'!!JSStream methodsFor: 'private' stamp: '1/8/2026 11:26:12'!add: anObject	fragments add: anObject! !!JSStream methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!argument: anObject	self add: (JSArgument with: anObject)! !!JSStream methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!arguments: aCollection	self add: (JSArguments withAll: aCollection)! !!JSStream methodsFor: 'copying' stamp: '1/8/2026 11:26:12'!copy	^ self class withFragments: fragments copy! !!JSStream methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	super initialize.	renderContext := WARenderContext new.	fragments := OrderedCollection new: 2! !!JSStream methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithFragments: anObject	super initialize.	renderContext := WARenderContext new.	fragments := anObject! !!JSStream methodsFor: 'streaming' stamp: '1/8/2026 11:26:12'!javascript: anObject	self add: anObject! !!JSStream methodsFor: 'streaming' stamp: '1/8/2026 11:26:12'!json: anObject	self nextPutAll: anObject asJson! !!JSStream methodsFor: 'streaming' stamp: '1/8/2026 11:26:12'!nextPut: aCharacter	"quite inefficient, ideally rare"	self add: (JSCode on: aCharacter greaseString)! !!JSStream methodsFor: 'streaming' stamp: '1/8/2026 11:26:12'!nextPutAll: aString	self add: (JSCode on: aString)! !!JSStream methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	fragments do: [ :each |		aRenderer render: each ]! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSStream class	instanceVariableNames: ''!JSStream class comment: 'I represent a verbatim JavaScript string. I support streaming facilities to efficiently encode JavaScript input.'!!JSStream class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!argument: anInteger	^ (Arguments at: anInteger + 1) copy! !!JSStream class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!argumentAt: anInteger	^ (Arguments at: anInteger) copy! !!JSStream class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!on: aString	^ self new nextPutAll: aString! !!JSStream class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!this	^ This copy! !!JSStream class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!withFragments: anObject	^ self basicNew initializeWithFragments: anObject! !!JSStream class methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	self initializeSnippets! !!JSStream class methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeSnippets	This := self on: 'this'.	Arguments := (0 to: 25)		collect: [ :each | self on: 'arguments[' , each printString , ']' ]! !JSObject subclass: #JSLogger	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Base'!JSLogger comment: 'I am a logger class to be used together with FireBug. I have nothing to do with Scriptaculous directly, but I nicely fit in here as everybody should be using FireBug for Script debugging anyway.'!!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject 	self 		call: 'assert'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject equals: anotherObject 	self 		call: 'assertEquals'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject greater: anotherObject 	self 		call: 'assertGreater'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject less: anotherObject 	self 		call: 'assertLess'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject notEquals: anotherObject 	self 		call: 'assertNotEquals'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject notGreater: anotherObject 	self 		call: 'assertNotGreater'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assert: anObject notLess: anotherObject 	self 		call: 'assertNotLess'		with: anObject		with: anotherObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertFalse: anObject 	self 		call: 'assertFalse'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertNotNull: anObject 	self 		call: 'assertNotNull'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertNotUndefined: anObject 	self 		call: 'assertNotUndefined'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertNull: anObject 	self 		call: 'assertNull'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertTrue: anObject 	self 		call: 'assertTrue'		with: anObject! !!JSLogger methodsFor: 'assertions' stamp: '1/8/2026 11:26:12'!assertUndefined: anObject 	self 		call: 'assertUndefined'		with: anObject! !!JSLogger methodsFor: 'messages' stamp: '1/8/2026 11:26:12'!debug: anObject 	self 		call: 'debug'		with: anObject! !!JSLogger methodsFor: 'messages' stamp: '1/8/2026 11:26:12'!error: anObject 	self 		call: 'error'		with: anObject! !!JSLogger methodsFor: 'messages' stamp: '1/8/2026 11:26:12'!info: anObject 	self 		call: 'info'		with: anObject! !!JSLogger methodsFor: 'messages' stamp: '1/8/2026 11:26:12'!warn: anObject 	self 		call: 'warn'		with: anObject! !!JSLogger methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document identifier: 'console'! !!JSLogger methodsFor: 'logging' stamp: '1/8/2026 11:26:12'!log: anObject 	self 		call: 'log'		with: anObject! !!JSLogger methodsFor: 'logging' stamp: '1/8/2026 11:26:12'!log: anObject format: anArray 	self 		call: 'log'		withArguments: (Array with: anObject) , anArray! !JSObject subclass: #JSString	instanceVariableNames: 'renderable'	classVariableNames: ''	package: 'Javascript-Core-Base'!!JSString methodsFor: 'utilities' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	"Need to render the renderable as a Javascript string with embedded html"	| jsEncoder document |	aRenderer document stream nextPut: $".	jsEncoder := GRPlatform current javascriptStringEncoderOn: aRenderer context document stream.	document := (WAHtmlDocument		on: jsEncoder		codec: self requestContext codec)		scriptGenerator: self requestContext handler scriptGeneratorClass new;		yourself.	self renderContext document: document during: [		(self rendererClass context: self renderContext)			render: renderable; flush ].	jsEncoder flushBuffer.	document scriptGenerator closeOn: document.	aRenderer document stream nextPut: $".! !!JSString methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!setRenderable: aRenderable	renderable := aRenderable ! !WABrush subclass: #JSJavascriptBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptBrush comment: 'A brush to generate JSON'!!JSJavascriptBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self subclassResponsibility! !!JSJavascriptBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self subclassResponsibility! !!JSJavascriptBrush methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!document	^ canvas document! !!JSJavascriptBrush methodsFor: 'public' stamp: '1/8/2026 11:26:12'!with: anObject	self openBrush.	super with: [		canvas render: anObject ].	self closeBrush! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptBrush class	instanceVariableNames: ''!JSJavascriptBrush class comment: 'A brush to generate JSON'!!JSJavascriptBrush class methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isAbstract 	^ self == JSJavascriptBrush! !JSJavascriptBrush subclass: #JSJavascriptFunctionArgumentBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptFunctionArgumentBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush! !!JSJavascriptFunctionArgumentBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	canvas writeCharacterIfNotFirst: $,! !JSJavascriptBrush subclass: #JSJavasciptObjectBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavasciptObjectBrush comment: 'A brush to generate a JSON object'!!JSJavasciptObjectBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document closeObject! !!JSJavasciptObjectBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document openObject! !JSJavascriptBrush subclass: #JSJavascriptOperatorBrush	instanceVariableNames: 'operator'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptOperatorBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush! !!JSJavascriptOperatorBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document operator: operator! !!JSJavascriptOperatorBrush methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithOperator: aString	self initialize.	operator := aString! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptOperatorBrush class	instanceVariableNames: ''!!JSJavascriptOperatorBrush class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!operator: aString	^ self basicNew initializeWithOperator: aString! !JSJavascriptBrush subclass: #JSJavascriptElementBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptElementBrush comment: 'Abstract superclass for JSON elements'!!JSJavascriptElementBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush! !!JSJavascriptElementBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	canvas writeCharacterIfNotFirst: $,! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptElementBrush class	instanceVariableNames: ''!JSJavascriptElementBrush class comment: 'Abstract superclass for JSON elements'!!JSJavascriptElementBrush class methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isAbstract 	^ self == JSJavascriptElementBrush! !JSJavascriptBrush subclass: #JSJavascriptFunctionArgumentsBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptFunctionArgumentsBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document nextPut: $)! !!JSJavascriptFunctionArgumentsBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document nextPut: $(! !JSJavascriptBrush subclass: #JSJavascriptArrayBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptArrayBrush comment: 'Brush for a JSON array'!!JSJavascriptArrayBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document closeArray! !!JSJavascriptArrayBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document openArray! !JSJavascriptBrush subclass: #JSJavascriptReturnBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptReturnBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush! !!JSJavascriptReturnBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document keyword: 'return'! !JSJavascriptElementBrush subclass: #JSJavascriptKeyValueBrush	instanceVariableNames: 'key'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptKeyValueBrush comment: 'A JSON key value'!!JSJavascriptKeyValueBrush methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithKey: aString	self initialize.	key := aString! !!JSJavascriptKeyValueBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	super openBrush.	key javascriptOn: canvas.	self document nextPut: $:! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptKeyValueBrush class	instanceVariableNames: ''!JSJavascriptKeyValueBrush class comment: 'A JSON key value'!!JSJavascriptKeyValueBrush class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!key: aString	^ self basicNew initializeWithKey: aString! !JSJavascriptBrush subclass: #JSJavascriptFunctionCallBrush	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptFunctionCallBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document nextPut: $)! !!JSJavascriptFunctionCallBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document identifier: name.	self document nextPut: $(! !!JSJavascriptFunctionCallBrush methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithName: aString	self initialize.	name := aString! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptFunctionCallBrush class	instanceVariableNames: ''!!JSJavascriptFunctionCallBrush class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!name: aString	^ self basicNew initializeWithName: aString! !JSJavascriptBrush subclass: #JSJavascriptAssignmentBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptAssignmentBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush! !!JSJavascriptAssignmentBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document assignment! !JSJavascriptElementBrush subclass: #JSJavascriptValueBrush	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Brushes'!JSJavascriptValueBrush comment: 'A JSON value'!JSObject subclass: #JSScript	instanceVariableNames: 'statements'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSScript comment: 'I represent a sequence of JavaScript statements.'!!JSScript methodsFor: 'adding' stamp: '1/8/2026 11:26:12'!, anObject	self add: anObject! !!JSScript methodsFor: 'adding' stamp: '1/8/2026 11:26:12'!<< anObject	^ self add: anObject! !!JSScript methodsFor: 'adding' stamp: '1/8/2026 11:26:12'!add: anObject	^ statements add: anObject! !!JSScript methodsFor: 'adding' stamp: '1/8/2026 11:26:12'!addAll: aCollection	^ statements addAll: aCollection! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!alert: anObject 	self add: (JSStream new		nextPutAll: 'alert';		argument: anObject;		yourself)! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!callback: aBlock	self goto: (self renderContext actionUrl		withField: (self renderContext callbacks store: (WAActionCallback on: aBlock)))! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!goto: aUrl 	self add: (JSStream new		nextPutAll: 'window.location=';		javascript: aUrl)! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!javascript	^ (JSScript context: self renderContext)		rendererClass: self rendererClass;		yourself! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!logger	^ self add: ((JSLogger context: self renderContext)		rendererClass: self rendererClass;		yourself)! !!JSScript methodsFor: 'convenience' stamp: '1/8/2026 11:26:12'!refresh	self goto: self renderContext actionUrl! !!JSScript methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	super initialize.	statements := OrderedCollection new! !!JSScript methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	statements		do: [ :each | aRenderer render: each ]		separatedBy: [ aRenderer document separator ]! !JSScript subclass: #JSFunction	instanceVariableNames: 'return arguments'	classVariableNames: ''	package: 'Javascript-Core-Base'!JSFunction comment: 'I represent an anonymous JavaScript function.'!!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!argument	^ arguments! !!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments	^ arguments! !!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments: aCollection	arguments := aCollection! !!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!argumentsDo: aBlock	self arguments do: aBlock! !!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!return	^ return ifNil: [ false ]! !!JSFunction methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!return: aBoolean	return := aBoolean! !!JSFunction methodsFor: 'converting' stamp: '1/8/2026 11:26:12'!asFunction	^ self! !!JSFunction methodsFor: 'converting' stamp: '1/8/2026 11:26:12'!asFunction: aCollection	self arguments: aCollection! !!JSFunction methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initialize	super initialize.	arguments := #()! !!JSFunction methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer defineFunction		arguments: self arguments;		with: [ 			statements isEmpty ifFalse: [				self return					ifTrue: [						1 to: statements size - 1 do: [:index | 							aRenderer render: (statements at: index).							aRenderer document separator ].						aRenderer return: statements last ]					ifFalse: [						statements							do: [ :each | aRenderer render: each ]							separatedBy: [ aRenderer document separator ] ] ] ]! !JSJavascriptBrush subclass: #JSJavascriptFunctionDefinitionBrush	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptFunctionDefinitionBrush methodsFor: 'public' stamp: '1/8/2026 11:26:12'!arguments: aCollectionOfStrings	arguments := aCollectionOfStrings! !!JSJavascriptFunctionDefinitionBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document closeBlock! !!JSJavascriptFunctionDefinitionBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document nextPutAll: 'function('.	arguments isNil ifFalse: [		arguments do: [ :each | self document identifier: each ]		separatedBy: [ self document nextPut: $, ].].	self document nextPut: $).	self document openBlock! !WAObject subclass: #JSDecoration	instanceVariableNames: 'owner'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSDecoration comment: 'I decorate JavaScript objects.'!!JSDecoration methodsFor: 'testing' stamp: '1/8/2026 11:26:12'!isJavascript	^ true! !!JSDecoration methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	self owner javascriptContentOn: aRenderer! !!JSDecoration methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!owner	^ owner! !!JSDecoration methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!renderContext	^ owner renderContext! !!JSDecoration methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!setOwner: anObject	owner := anObject! !JSDecoration subclass: #JSCreate	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCreate comment: 'I instantiate the decorated object.'!!JSCreate methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document keyword: 'new'.	super javascriptContentOn: aRenderer! !JSDecoration subclass: #JSApply	instanceVariableNames: 'arguments'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSApply comment: 'I apply a JavaScript function and provide arguments.'!!JSApply methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments	^ arguments! !!JSApply methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments: aCollection	arguments := aCollection! !!JSApply methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!argumentsDo: aBlock	self arguments do: aBlock! !!JSApply methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer arguments: [ 		self argumentsDo: [ :each |			aRenderer argument: each ] ]! !JSDecoration subclass: #JSNegation	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSNegation comment: 'I negate the decorated object and yield a boolean value.'!!JSNegation methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document negation.	super javascriptContentOn: aRenderer! !JSDecoration subclass: #JSIfThenElse	instanceVariableNames: 'trueStatement falseStatement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSIfThenElse comment: 'I execute different code snippets depending if the receiver is true (defined) or false (null).'!!JSIfThenElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!falseStatement	^ falseStatement! !!JSIfThenElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!falseStatement: anObject	falseStatement := anObject! !!JSIfThenElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!trueStatement	^ trueStatement! !!JSIfThenElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!trueStatement: anObject	trueStatement := anObject! !!JSIfThenElse methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document nextPut: $(.	super javascriptContentOn: aRenderer.	aRenderer document nextPut: $?.	aRenderer render: self trueStatement.	aRenderer document nextPut: $:.	aRenderer render: self falseStatement.	aRenderer document nextPut: $)! !JSDecoration subclass: #JSAssignment	instanceVariableNames: 'object'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssignment comment: 'I represent an assignment ot the decorated object.'!!JSAssignment methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer assignment: [ 		aRenderer render: self object ]! !!JSAssignment methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!object	^ object! !!JSAssignment methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!object: anObject	object := anObject! !JSDecoration subclass: #JSStatement	instanceVariableNames: 'statement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!!JSStatement methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!statement	^ statement! !!JSStatement methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!statement: anObject	statement := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSStatement class	instanceVariableNames: ''!!JSStatement class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!on: anObject	^ self new statement: anObject! !JSStatement subclass: #JSConcatenation	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSConcatenation comment: 'I represent a sequence (or concatenation) of a decorated object and another object.'!!JSConcatenation methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer document separator.	aRenderer render: self statement! !JSStatement subclass: #JSCondition	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCondition comment: 'I wrap the decorated object into a conditional statement.'!!JSCondition methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	(aRenderer function: 'if')		with: [ 			aRenderer render: self statement ].	aRenderer document openBlock.	super javascriptContentOn: aRenderer.	aRenderer document closeBlock.! !JSDecoration subclass: #JSMember	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!!JSMember methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!name	^ name! !!JSMember methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!name: aString	name := aString! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSMember class	instanceVariableNames: ''!!JSMember class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!named: anObject	^ self new name: anObject! !JSMember subclass: #JSProperty	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSProperty comment: 'I access a property of the decorated object.'!!JSProperty methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer bracketProperty: self name! !JSMember subclass: #JSAlias	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAlias comment: 'I alias the decorated object with a name.'!!JSAlias methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document identifier: self name! !JSMember subclass: #JSAssign	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssign comment: 'I assign the decorated object to a global variable.'!!JSAssign methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document identifier: self name.	aRenderer assignment: [		super javascriptContentOn: aRenderer ]! !JSCondition subclass: #JSConditionElse	instanceVariableNames: 'elseStatement'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!!JSConditionElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!elseStatement	^ elseStatement! !!JSConditionElse methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!elseStatement: anObject	elseStatement := anObject! !!JSConditionElse methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer document 		nextPutAll: 'else';		openBlock.	aRenderer render: self elseStatement.	aRenderer document closeBlock! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSConditionElse class	instanceVariableNames: ''!!JSConditionElse class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!on: statement else: elseStatement	^ (super on: statement)		elseStatement: elseStatement;		yourself! !JSAssign subclass: #JSAssignLocal	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAssignLocal comment: 'I assign the decorated object to a local variable.'!!JSAssignLocal methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	aRenderer document keyword: 'var'.	super javascriptContentOn: aRenderer! !JSDecoration subclass: #JSCall	instanceVariableNames: 'name arguments'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSCall comment: 'I represent a function call or method invocation to the decorated object.'!!JSCall methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments	^ arguments! !!JSCall methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!arguments: anArray 	arguments := anArray! !!JSCall methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!argumentsDo: aBlock	self arguments do: aBlock! !!JSCall methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!name	^ name! !!JSCall methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!name: aString 	name := aString! !!JSCall methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	self name isEmptyOrNil ifFalse: [		aRenderer document dotProperty: self name ].	aRenderer arguments: [ 		self argumentsDo: [ :each |			aRenderer argument: each ] ]! !JSStatement subclass: #JSBinary	instanceVariableNames: 'operator'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSBinary comment: 'I join the decorated object with a binary operator.'!!JSBinary methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	(aRenderer operator: self operator)		with: self statement! !!JSBinary methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!operator	^ operator! !!JSBinary methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!operator: aString	operator := aString! !JSMember subclass: #JSAccess	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSAccess comment: 'I access a member of the decorated object.'!!JSAccess methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	super javascriptContentOn: aRenderer.	aRenderer document dotProperty: self name! !JSDecoration subclass: #JSTimed	instanceVariableNames: 'duration'	classVariableNames: ''	package: 'Javascript-Core-Decorations'!!JSTimed methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!duration	^ duration! !!JSTimed methodsFor: 'accessing' stamp: '1/8/2026 11:26:12'!duration: aDuration	duration := aDuration! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSTimed class	instanceVariableNames: ''!!JSTimed class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!duration: aDuration	^ self new duration: aDuration! !JSTimed subclass: #JSInterval	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSInterval comment: 'I periodically execute the decorated object.'!!JSInterval methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	(aRenderer function: 'setInterval')		with: [			aRenderer argument: [				aRenderer defineFunction: [					super javascriptContentOn: aRenderer ] ].			aRenderer argument: self duration ]! !JSTimed subclass: #JSTimeout	instanceVariableNames: ''	classVariableNames: ''	package: 'Javascript-Core-Decorations'!JSTimeout comment: 'I evaluate the decorated object after a timeout.'!!JSTimeout methodsFor: 'printing' stamp: '1/8/2026 11:26:12'!javascriptContentOn: aRenderer	(aRenderer function: 'setTimeout')		with: [			aRenderer argument: [				aRenderer defineFunction: [					super javascriptContentOn: aRenderer ] ].			aRenderer argument: self duration ]! !JSJavascriptBrush subclass: #JSJavascriptConstructorCallBrush	instanceVariableNames: 'name'	classVariableNames: ''	package: 'Javascript-Core-Brushes'!!JSJavascriptConstructorCallBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!closeBrush	self document nextPut: $)! !!JSJavascriptConstructorCallBrush methodsFor: 'private' stamp: '1/8/2026 11:26:12'!openBrush	self document keyword: 'new'.	self document identifier: name.	self document nextPut: $(! !!JSJavascriptConstructorCallBrush methodsFor: 'initialization' stamp: '1/8/2026 11:26:12'!initializeWithName: aString	self initialize.	name := aString! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!JSJavascriptConstructorCallBrush class	instanceVariableNames: ''!!JSJavascriptConstructorCallBrush class methodsFor: 'instance creation' stamp: '1/8/2026 11:26:12'!name: aString	^ self basicNew initializeWithName: aString! !JSJavascriptStringEncoder initialize!JSStream initialize!'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.492844 pm'!!GRSmallOrderedSet methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer array: [		self do: [ :each |			aRenderer value: each ] ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.493322 pm'!!WARenderer methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascript: aString	"Create a piece of Javascript from a String"	^ JSStream on: aString! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.493638 pm'!!WARenderer methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascript	^ (JSScript context: self context)		rendererClass: self species;		yourself! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.49387 pm'!!WARenderer methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!logger	^ (JSLogger context: self context)		rendererClass: self species;		yourself! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.494287 pm'!!Duration methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer render: self asMilliseconds! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.494493 pm'!!GRDelegatingStream methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascript: anObject	| document context canvas |	document := JSJavascriptDocument on: self.	context := WARenderContext new		actionUrl: WAUrl new;		document: document;		yourself.	canvas := JSJavascriptCanvas context: context.	canvas render: anObject.	document close! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.49472 pm'!!String methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer string: self! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.494938 pm'!!String methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!asFunction: aCollection	^ (JSStream on: self) asFunction: aCollection! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.495128 pm'!!WACallbackRegistry methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!registerPassenger: anObject named: aString	| callback |	callback := JSPassenger new.	callback setKey: aString callbacks: callbacks; setObject: anObject.	callbacks at: (callback convertKey: aString) put: callback.	^ aString! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.495366 pm'!!WACallbackRegistry methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!passengerAt: aString ifAbsent: aBlock	| passenger |	passenger := callbacks at: aString ifAbsent: [ ^ aBlock value ].	passenger isPassenger ifFalse: [ ^ aBlock value ].	^ passenger object! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.495578 pm'!!WACallbackRegistry methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!passengerAt: aString	^ self passengerAt: aString ifAbsent: [ nil ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.49579 pm'!!GRSmallDictionary2 methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer object: [		self keysAndValuesDo: [ :key :value |			aRenderer key: key value: value ] ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.496048 pm'!!WATagBrush methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!passenger: anObject	"Assign a passenger object to the receiver. This is used to keep a mapping between DOM elements and Smalltalk objects. Note, that to we are required to assign a numeric id to the reciever in order to keep the mapping between DOM element and Smalltalk object."	canvas callbacks registerPassenger: anObject named: self ensureId! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.496268 pm'!!WATagBrush methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!script: anObject	"Attach a JavaScript object to the receiver. The argument automatically knows the ID of the DOM element it should operate on and will be evaluated when the page complete loading."	(anObject isNil) 		ifTrue: [ ^ self ].	(anObject respondsTo: #id:)		ifTrue: [ anObject id: self ensureId ].	canvas document addLoadScript: anObject! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.496466 pm'!!Dictionary methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer object: [		self keysAndValuesDo: [ :key :value |			 aRenderer key: key value: value ] ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.496665 pm'!!Boolean methodsFor: '*Javascript-Core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer boolean: self! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.496849 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	self printOn: aRenderer document stream! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.497059 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!asJavascript	^ JSJavascriptCanvas builder render: [ :javascript |		  self javascriptOn: javascript ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.497249 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!asFunction	^ self asFunction: #()! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.497437 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!isJavascript	^ false! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.497628 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!asJavascriptOn: aStream	^ JSJavascriptCanvas builder		  render: [ :javascript | self javascriptOn: javascript ]		  on: aStream! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.497819 pm'!!Object methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!asFunction: aCollection	^ JSFunction new add: self; arguments: aCollection! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.498007 pm'!!WAUrl methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer string: self printString! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.498191 pm'!!GRSmallDictionary methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer object: [		self keysAndValuesDo: [ :key :value |			aRenderer key: key value: value ] ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.498407 pm'!!DateAndTime methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	(aRenderer new: 'Date')		with: [			aRenderer 				argument: self year;				argument: self javascriptMonthIndex;				argument: self dayOfMonth;				argument: self hour;				argument: self minute;				argument: self second ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.498626 pm'!!DateAndTime methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptMonthIndex	^ self monthIndex - 1! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.498824 pm'!!GRPlatform methodsFor: '*Javascript-Core' stamp: '1/8/2026 11:26:12'!javascriptStringEncoderOn: aStream	"Answer an Javascript encoder that works on aStream.	Platforms may provide optimized implementations."	^ JSJavascriptStringEncoder on: aStream! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499029 pm'!!Date methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	(aRenderer new: 'Date')		with: [ 			aRenderer argument: self year.			aRenderer argument: self javascriptMonthIndex.			aRenderer argument: self dayOfMonth ]! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499212 pm'!!Date methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptMonthIndex	^ self monthIndex - 1! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499386 pm'!!Stream methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascript: anObject	JSJavascriptCanvas builder		render: anObject		on: self! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499568 pm'!!Character methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer string: (String with: self)! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499768 pm'!!WACallback methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!isPassenger	^ false! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.499968 pm'!!UndefinedObject methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer document null! !'From Pharo13.1.0SNAPSHOT of 17 December 2025 [Build information: Pharo-13.1.0+SNAPSHOT.build.720.sha.6d4e07567e4d6500945a1f2476a81c3abb4426b1 (64 Bit)] on 13 January 2026 at 12:17:08.500198 pm'!!Collection methodsFor: '*javascript-core' stamp: '1/8/2026 11:26:12'!javascriptOn: aRenderer	aRenderer array: [		self do: [ :each |			 aRenderer value: each ] ]! !